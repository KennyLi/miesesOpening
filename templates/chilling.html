{% extends "awesome.html" %}
{% block body %}
    <label>TYPES:
        <select id="dropdown" name="wee">
            <option value="Fire">fire</option>
            <option value="Water">water</option>
            <option value="Grass">grass</option>
        </select>
    </label>
    <div id="div"></div>
    <div id="div2"></div>
    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
    <script>
        var div = document.getElementById("div");
        var div2 = document.getElementById("div2");
        var dropdown = document.getElementById("dropdown");
        var url = "/muh_api/";
        var dataz;

        var type = dropdown.options[dropdown.selectedIndex].value;
        div.innerHTML = type;

        function hello() {
            $.get(url, {"type": type})
                .done(function (response) {
                    console.log(response);
                    var pklist = JSON.parse(response)["hello"];
                    {#div2.innerHTML = pklist;#}
                    console.log(typeof(pklist));
                    for (var i = 0; i < pklist.length; i++) {
                        div2.innerHTML += pklist[i]["name"] + "<br>\n"
                    }
                })
        }

        hello();

        dropdown.addEventListener('change', (event) => {
            type = dropdown.options[dropdown.selectedIndex].value;
            div.innerHTML = type;
            hello();
        });
        {#console.log(url);#}
        //console.log(dataz[0]);
    </script>
{% endblock %}
